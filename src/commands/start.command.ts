import {Telegraf} from "telegraf";
import {Command} from "./command.class";
import {IBotContext} from "../context/context.interface";
import {AdminService} from "../helpers/admin.service";
import {logger} from "../helpers/logger";

export class StartCommnds extends Command {
    constructor(bot: Telegraf<IBotContext>, public adminService: AdminService) {
        super(bot);
    }

    handle(): void {
        this.bot.start((ctx: any) => {
            const parameters = ctx.update.message.text.split(' ');
            ctx.session.ref_code = parameters[1] ?? 0;
            try {
                ctx.reply(`–ü—Ä–∏–≤–µ—Ç\\! üëã

–≠—Ç–æ –±–æ—Ç –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ Adswap: –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –±–∞—Ä—Ç–µ—Ä–Ω–æ–π —Ä–µ–∫–ª–∞–º—ã –¥–ª—è —Å–µ–ª–ª–µ—Ä–æ–≤ –∏ –±–ª–æ–≥–µ—Ä–æ–≤ üöÄ

üë• –î–ª—è **—Å–µ–ª–ª–µ—Ä–æ–≤** Adswap –ø–æ–º–æ–∂–µ—Ç:

‚úÖ –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Ä–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ –ø–æ –±–∞—Ä—Ç–µ—Ä—É  
‚úÖ –ü–æ–≤—ã—Å–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥ —Ç–æ–≤–∞—Ä–æ–≤ –∏ —Å–æ–±–∏—Ä–∞—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ç–∑—ã–≤—ã  
‚úÖ –ü—Ä–∏–≤–ª–µ–∫–∞—Ç—å –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–Ω–µ—à–Ω–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞  
‚úÖ –ù–∞—Ä–∞—â–∏–≤–∞—Ç—å –ø—Ä–æ–¥–∞–∂–∏ –∏ —É–∫—Ä–µ–ø–ª—è—Ç—å –ª–æ—è–ª—å–Ω–æ—Å—Ç—å –∞—É–¥–∏—Ç–æ—Ä–∏–∏  

üë§ –î–ª—è **–±–ª–æ–≥–µ—Ä–æ–≤** Adswap –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç:

‚úÖ –ü–æ–ª—É—á–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –Ω–∞ –æ–±–∑–æ—Ä —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ  
‚úÖ –£–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –æ—Ö–≤–∞—Ç—ã –∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç  
‚úÖ –ü—Ä–∏–≤–ª–µ–∫–∞—Ç—å –Ω–æ–≤—ã—Ö —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª–µ–π, –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –≤–∞—à–µ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏  
‚úÖ –ü–æ–≤—ã—à–∞—Ç—å —Å–≤–æ—é —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ—Å—Ç—å –∏ —É–∑–Ω–∞–≤–∞–µ–º–æ—Å—Ç—å  

üéÅ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å üëá –∏ –ø–æ–ª—É—á–∏—Ç–µ 30 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏ 5 –±–∞—Ä—Ç–µ—Ä–æ–≤ –≤ –ø–æ–¥–∞—Ä–æ–∫ –∫–∞–∂–¥–æ–º—É –Ω–æ–≤–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é\\!

–ü–æ –ª—é–±—ã–º –≤–æ–ø—Ä–æ—Å–∞–º ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ [–Ω–∞–º](https://t.me/adswap_admin) üëà

–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—è—Å—å –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ, –≤—ã –¥–∞–µ—Ç–µ —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∞ —Ç–∞–∫–∂–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏–µ —Å [–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ–º](https://adswap.ru/privacy) –∏ [–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏](https://adswap.ru/agreement)\\.
`, {
                    reply_markup: {
                        inline_keyboard: [
                            [{text: "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è", callback_data: "enter_register"}],
                        ],
                    },
                    parse_mode: 'MarkdownV2',
                    disable_web_page_preview: true,
                });
            } catch (e: any) {
                logger.info(e.message);
            }
        });
    }
}